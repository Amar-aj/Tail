@page "/layout-demo"
@using Tail.Blazor.Layout
@using Tail.Blazor.Buttons
@using Tail.Blazor.Feedback
@using Tail.Blazor.Forms
@using Tail.Blazor.Core.Theme
@using ButtonVariant = Tail.Blazor.Button.ButtonVariant
@using ButtonSize = Tail.Blazor.Button.ButtonSize

<PageTitle>Layout Demo - Tail.Blazor</PageTitle>

<div class="max-w-7xl mx-auto px-4 py-8">
    <div class="mb-8">
        <h1 class="text-4xl font-bold mb-4" style="color: var(--color-text-primary);">Layout Components Demo</h1>
        <p class="text-lg" style="color: var(--color-text-secondary);">
            Interactive demonstration of all layout features including app bar, collapsible menu, avatar, and more.
        </p>
    </div>

    <!-- Configuration Panel -->
    <div class="mb-8 p-6 rounded-lg" style="background-color: var(--color-surface); border: 1px solid var(--color-border); border-radius: var(--radius-lg);">
        <h2 class="text-2xl font-semibold mb-6" style="color: var(--color-text-primary);">Configuration</h2>
        
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
            <!-- Layout Mode -->
            <div>
                <label class="block text-sm font-medium mb-2" style="color: var(--color-text-primary);">Layout Mode</label>
                <TailSelect Value="@selectedLayoutModeStr" ValueChanged="@((string? val) => selectedLayoutModeStr = val)" Items="@layoutModeOptions" />
            </div>

            <!-- Density -->
            <div>
                <label class="block text-sm font-medium mb-2" style="color: var(--color-text-primary);">Density</label>
                <TailSelect Value="@selectedDensityStr" ValueChanged="@((string? val) => selectedDensityStr = val)" Items="@densityOptions" />
            </div>

            <!-- Menu Position -->
            <div>
                <label class="block text-sm font-medium mb-2" style="color: var(--color-text-primary);">Menu Position</label>
                <TailSelect Value="@selectedMenuPositionStr" ValueChanged="@((string? val) => selectedMenuPositionStr = val)" Items="@menuPositionOptions" />
            </div>

            <!-- Show Menu Toggle -->
            <div>
                <label class="block text-sm font-medium mb-2" style="color: var(--color-text-primary);">Show Menu Toggle</label>
                <TailSwitch IsChecked="@showMenuToggle" IsCheckedChanged="@((bool val) => showMenuToggle = val)" Label="Enable Menu Toggle" />
            </div>

            <!-- Show Theme Toggle -->
            <div>
                <label class="block text-sm font-medium mb-2" style="color: var(--color-text-primary);">Show Theme Toggle</label>
                <TailSwitch IsChecked="@showThemeToggle" IsCheckedChanged="@((bool val) => showThemeToggle = val)" Label="Enable Theme Toggle" />
            </div>

            <!-- Show Avatar -->
            <div>
                <label class="block text-sm font-medium mb-2" style="color: var(--color-text-primary);">Show Avatar</label>
                <TailSwitch IsChecked="@showAvatar" IsCheckedChanged="@((bool val) => showAvatar = val)" Label="Enable Avatar" />
            </div>

            <!-- Sticky Header -->
            <div>
                <label class="block text-sm font-medium mb-2" style="color: var(--color-text-primary);">Sticky Header</label>
                <TailSwitch IsChecked="@stickyHeader" IsCheckedChanged="@((bool val) => stickyHeader = val)" Label="Sticky Header" />
            </div>

            <!-- Header Shadow -->
            <div>
                <label class="block text-sm font-medium mb-2" style="color: var(--color-text-primary);">Header Shadow</label>
                <TailSwitch IsChecked="@headerShadow" IsCheckedChanged="@((bool val) => headerShadow = val)" Label="Header Shadow" />
            </div>

            <!-- Collapsible Menu -->
            <div>
                <label class="block text-sm font-medium mb-2" style="color: var(--color-text-primary);">Collapsible Menu</label>
                <TailSwitch IsChecked="@collapsibleMenu" IsCheckedChanged="@((bool val) => collapsibleMenu = val)" Label="Collapsible Menu" />
            </div>

            <!-- Menu Open by Default -->
            <div>
                <label class="block text-sm font-medium mb-2" style="color: var(--color-text-primary);">Menu Open by Default</label>
                <TailSwitch IsChecked="@menuOpenByDefault" IsCheckedChanged="@((bool val) => menuOpenByDefault = val)" Label="Open by Default" />
            </div>
        </div>

        <!-- User Info -->
        <div class="mt-6 grid grid-cols-1 md:grid-cols-2 gap-4">
            <div>
                <label class="block text-sm font-medium mb-2" style="color: var(--color-text-primary);">User Name</label>
                <TailInput Value="@userName" ValueChanged="@((string? val) => userName = val)" Placeholder="Enter user name" />
            </div>
            <div>
                <label class="block text-sm font-medium mb-2" style="color: var(--color-text-primary);">User Email</label>
                <TailInput Value="@userEmail" ValueChanged="@((string? val) => userEmail = val)" Placeholder="Enter user email" Type="email" />
            </div>
        </div>
    </div>

    <!-- Live Preview -->
    <div class="mb-8">
        <h2 class="text-2xl font-semibold mb-4" style="color: var(--color-text-primary);">Live Preview</h2>
        <div class="border-4 rounded-lg overflow-hidden" style="border-color: var(--color-border); height: 600px; background-color: var(--color-background);">
            <TailResponsiveLayout 
                AppName="@appName"
                ShowMenuToggle="@showMenuToggle"
                ShowThemeToggle="@showThemeToggle"
                ShowAvatar="@showAvatar"
                StickyHeader="@stickyHeader"
                HeaderShadow="@headerShadow"
                ShowSidebar="@(selectedLayoutModeStr != "AppbarOnly")"
                MenuOpenByDefault="@menuOpenByDefault"
                LayoutMode="@selectedLayoutModeStr"
                Density="@selectedDensityStr"
                MenuPosition="@selectedMenuPosition"
                CollapsibleMenu="@collapsibleMenu"
                UserName="@userName"
                UserEmail="@userEmail"
                Email="@userEmail"
                MobileMenuTitle="Navigation Menu">
                <LogoTemplate>
                    <div class="flex items-center gap-2">
                        <div class="w-8 h-8 rounded-lg flex items-center justify-center text-white font-bold" 
                             style="background: linear-gradient(135deg, var(--color-primary), var(--color-secondary));">
                            T
                        </div>
                        <div>
                            <h1 class="text-lg font-bold" style="color: var(--color-text-primary)">@appName</h1>
                            <p class="text-xs" style="color: var(--color-text-muted)">v1.0.0</p>
                        </div>
                    </div>
                </LogoTemplate>
                <HeaderCenterContent>
                    <div class="flex items-center gap-2">
                        <TailButton Variant="ButtonVariant.Ghost" Size="ButtonSize.Sm">Home</TailButton>
                        <TailButton Variant="ButtonVariant.Ghost" Size="ButtonSize.Sm">About</TailButton>
                        <TailButton Variant="ButtonVariant.Ghost" Size="ButtonSize.Sm">Contact</TailButton>
                    </div>
                </HeaderCenterContent>
                <UserMenuItems>
                    <a href="#" class="block px-4 py-2 text-sm hover:bg-gray-100 dark:hover:bg-gray-700" 
                       style="color: var(--color-text-primary);">Profile</a>
                    <a href="#" class="block px-4 py-2 text-sm hover:bg-gray-100 dark:hover:bg-gray-700" 
                       style="color: var(--color-text-primary);">Settings</a>
                    <div class="border-t" style="border-color: var(--color-divider);"></div>
                    <a href="#" class="block px-4 py-2 text-sm hover:bg-gray-100 dark:hover:bg-gray-700" 
                       style="color: var(--color-text-primary);">Sign Out</a>
                </UserMenuItems>
                <SidebarContent>
                    <TailNavMenu Items="@demoNavItems" Size="NavMenuSize.Md" ShowIcons="true" />
                </SidebarContent>
                <ChildContent>
                    <div class="p-6">
                        <div class="mb-6">
                            <h3 class="text-2xl font-bold mb-2" style="color: var(--color-text-primary);">Welcome to @appName</h3>
                            <p style="color: var(--color-text-secondary);">
                                This is a live preview of the layout components. Adjust the settings above to see different configurations.
                            </p>
                        </div>

                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6">
                            <div class="p-4 rounded-lg" style="background-color: var(--color-surface); border: 1px solid var(--color-border);">
                                <div class="text-2xl font-bold mb-1" style="color: var(--color-primary);">1,234</div>
                                <div class="text-sm" style="color: var(--color-text-secondary);">Total Users</div>
                            </div>
                            <div class="p-4 rounded-lg" style="background-color: var(--color-surface); border: 1px solid var(--color-border);">
                                <div class="text-2xl font-bold mb-1" style="color: var(--color-success);">5,678</div>
                                <div class="text-sm" style="color: var(--color-text-secondary);">Active Sessions</div>
                            </div>
                            <div class="p-4 rounded-lg" style="background-color: var(--color-surface); border: 1px solid var(--color-border);">
                                <div class="text-2xl font-bold mb-1" style="color: var(--color-warning);">890</div>
                                <div class="text-sm" style="color: var(--color-text-secondary);">Pending Tasks</div>
                            </div>
                        </div>

                        <div class="p-6 rounded-lg" style="background-color: var(--color-surface); border: 1px solid var(--color-border);">
                            <h4 class="text-lg font-semibold mb-4" style="color: var(--color-text-primary);">Recent Activity</h4>
                            <div class="space-y-3">
                                @foreach (var activity in recentActivities)
                                {
                                    <div class="flex items-start gap-3 p-3 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors">
                                        <div class="w-10 h-10 rounded-full flex items-center justify-center flex-shrink-0" 
                                             style="background-color: color-mix(in srgb, var(--color-primary) 20%, transparent);">
                                            <span class="text-sm">@activity.Icon</span>
                                        </div>
                                        <div class="flex-1">
                                            <p class="text-sm font-medium" style="color: var(--color-text-primary);">@activity.Title</p>
                                            <p class="text-xs" style="color: var(--color-text-muted);">@activity.Description</p>
                                        </div>
                                        <span class="text-xs" style="color: var(--color-text-muted);">@activity.Time</span>
                                    </div>
                                }
                            </div>
                        </div>
                    </div>
                </ChildContent>
            </TailResponsiveLayout>
        </div>
    </div>

    <!-- Code Example -->
    <div class="mb-8">
        <h2 class="text-2xl font-semibold mb-4" style="color: var(--color-text-primary);">Code Example</h2>
        <pre class="p-4 rounded-lg overflow-x-auto" style="background-color: var(--color-surface-2); border: 1px solid var(--color-border);"><code>@GetCodeExample()</code></pre>
    </div>

    <!-- Feature List -->
    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
        <div class="p-6 rounded-lg" style="background-color: var(--color-surface); border: 1px solid var(--color-border);">
            <h3 class="text-xl font-semibold mb-4" style="color: var(--color-text-primary);">Layout Features</h3>
            <ul class="space-y-2 text-sm" style="color: var(--color-text-secondary);">
                <li>‚úì Multiple layout modes (Drawer Left, Clipped Drawer, Appbar Only)</li>
                <li>‚úì Density modes (Normal, Dense, Compact)</li>
                <li>‚úì Responsive design (Mobile, Tablet, Desktop)</li>
                <li>‚úì Collapsible sidebar menu</li>
                <li>‚úì Sticky header with shadow</li>
                <li>‚úì Theme toggle integration</li>
                <li>‚úì User avatar with dropdown menu</li>
                <li>‚úì Custom logo and app name</li>
            </ul>
        </div>
        <div class="p-6 rounded-lg" style="background-color: var(--color-surface); border: 1px solid var(--color-border);">
            <h3 class="text-xl font-semibold mb-4" style="color: var(--color-text-primary);">Customization Options</h3>
            <ul class="space-y-2 text-sm" style="color: var(--color-text-secondary);">
                <li>‚úì Menu position (Left, Right)</li>
                <li>‚úì Header transparency</li>
                <li>‚úì Custom header content</li>
                <li>‚úì User menu items</li>
                <li>‚úì Sidebar content templates</li>
                <li>‚úì Mobile menu title</li>
                <li>‚úì Default menu state</li>
                <li>‚úì Full CSS variable support</li>
            </ul>
        </div>
    </div>
</div>

@code {
    private string selectedLayoutModeStr = "DrawerLeft";
    private string selectedDensityStr = "Normal";
    private string selectedMenuPositionStr = "Left";
    
    private bool showMenuToggle = true;
    private bool showThemeToggle = true;
    private bool showAvatar = true;
    private bool stickyHeader = true;
    private bool headerShadow = true;
    private bool collapsibleMenu = true;
    private bool menuOpenByDefault = true;
    
    private string appName = "My Application";
    private string userName = "John Doe";
    private string userEmail = "john.doe@example.com";

    private List<string> layoutModeOptions = new() { "DrawerLeft", "ClippedDrawer", "AppbarOnly" };
    private List<string> densityOptions = new() { "Normal", "Dense", "Compact" };
    private List<string> menuPositionOptions = new() { "Left", "Right" };

    private List<NavMenuItem> demoNavItems = new()
    {
        new NavMenuItem { Href = "#", Text = "Dashboard", Icon = "üè†" },
        new NavMenuItem { Href = "#", Text = "Analytics", Icon = "üìä" },
        new NavMenuItem { Href = "#", Text = "Reports", Icon = "üìù" },
        new NavMenuItem { IsDivider = true },
        new NavMenuItem { Href = "#", Text = "Settings", Icon = "‚öôÔ∏è" }
    };

    private List<ActivityItem> recentActivities = new()
    {
        new ActivityItem { Icon = "üë§", Title = "New user registered", Description = "User john@example.com signed up", Time = "2m ago" },
        new ActivityItem { Icon = "üìä", Title = "Report generated", Description = "Monthly sales report created", Time = "15m ago" },
        new ActivityItem { Icon = "‚öôÔ∏è", Title = "Settings updated", Description = "System configuration changed", Time = "1h ago" },
        new ActivityItem { Icon = "üîî", Title = "Notification sent", Description = "Email notification delivered", Time = "2h ago" }
    };

    // LayoutMode and DensityMode enums would need to be imported from the appropriate namespace
    // For now, using strings directly

    private string GetCodeExample()
    {
        return $@"<TailResponsiveLayout 
    AppName=""{appName}""
    ShowMenuToggle=""{showMenuToggle.ToString().ToLower()}""
    ShowThemeToggle=""{showThemeToggle.ToString().ToLower()}""
    ShowAvatar=""{showAvatar.ToString().ToLower()}""
    StickyHeader=""{stickyHeader.ToString().ToLower()}""
    HeaderShadow=""{headerShadow.ToString().ToLower()}""
    LayoutMode=""LayoutMode.{selectedLayoutMode}""
    Density=""DensityMode.{selectedDensity}""
    MenuPosition=""TailCollapsibleMenu.MenuPosition.{selectedMenuPosition}""
    CollapsibleMenu=""{collapsibleMenu.ToString().ToLower()}""
    MenuOpenByDefault=""{menuOpenByDefault.ToString().ToLower()}""
    UserName=""{userName}""
    UserEmail=""{userEmail}""&gt;
    &lt;LogoTemplate&gt;
        &lt;!-- Custom logo --&gt;
    &lt;/LogoTemplate&gt;
    &lt;HeaderCenterContent&gt;
        &lt;!-- Center navigation --&gt;
    &lt;/HeaderCenterContent&gt;
    &lt;UserMenuItems&gt;
        &lt;!-- User menu items --&gt;
    &lt;/UserMenuItems&gt;
    &lt;SidebarContent&gt;
        &lt;!-- Navigation menu --&gt;
    &lt;/SidebarContent&gt;
    &lt;ChildContent&gt;
        &lt;!-- Page content --&gt;
    &lt;/ChildContent&gt;
&lt;/TailResponsiveLayout&gt;";
    }

    private class ActivityItem
    {
        public string Icon { get; set; } = string.Empty;
        public string Title { get; set; } = string.Empty;
        public string Description { get; set; } = string.Empty;
        public string Time { get; set; } = string.Empty;
    }
}

