@page "/components/layout"
@using Tail.Blazor.Layout
@using Tail.Blazor.Docs.Shared

<PageTitle>Layout - Tail.Blazor</PageTitle>

<div class="container mx-auto px-4 py-8 max-w-6xl">
    <h1 class="text-4xl font-bold mb-2 text-gray-900 dark:text-white">Layout Components</h1>
    <p class="text-lg text-gray-600 dark:text-gray-400 mb-8">
        Structural components for organizing and presenting content with Cards, Grids, Containers, and Dividers.
    </p>

    <!-- TailCard -->
    <section class="mb-12">
        <h2 class="text-3xl font-bold mb-4 text-gray-900 dark:text-white">Card</h2>
        <p class="text-gray-600 dark:text-gray-400 mb-6">
            Cards provide a flexible container for displaying related content with optional headers and footers.
        </p>

        <CodePreview Title="Basic Card" Code="@cardCode">
            <PreviewContent>
                <TailCard Header="Card Title" Footer="Card Footer">
                    <p class="text-gray-700 dark:text-gray-300">
                        This is the card content. Cards are great for displaying related information in a contained, organized way.
                    </p>
                </TailCard>
            </PreviewContent>
        </CodePreview>

        <CodePreview Title="Card with Custom Content" Code="@cardCustomCode">
            <PreviewContent>
                <div class="grid md:grid-cols-2 gap-4">
                    <TailCard Header="User Profile">
                        <div class="flex items-center space-x-4">
                            <div class="w-16 h-16 bg-blue-500 rounded-full"></div>
                            <div>
                                <h3 class="font-bold text-gray-900 dark:text-white">John Doe</h3>
                                <p class="text-sm text-gray-600 dark:text-gray-400">Software Developer</p>
                            </div>
                        </div>
                    </TailCard>
                    
                    <TailCard Header="Statistics" Footer="Updated 5 minutes ago">
                        <div class="space-y-2">
                            <div class="flex justify-between">
                                <span class="text-gray-600 dark:text-gray-400">Views</span>
                                <span class="font-bold text-gray-900 dark:text-white">1,234</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="text-gray-600 dark:text-gray-400">Likes</span>
                                <span class="font-bold text-gray-900 dark:text-white">567</span>
                            </div>
                        </div>
                    </TailCard>
                </div>
            </PreviewContent>
        </CodePreview>
    </section>

    <!-- TailGrid -->
    <section class="mb-12">
        <h2 class="text-3xl font-bold mb-4 text-gray-900 dark:text-white">Grid</h2>
        <p class="text-gray-600 dark:text-gray-400 mb-6">
            Responsive grid system for arranging content in columns with customizable gaps.
        </p>

        <CodePreview Title="3-Column Grid" Code="@gridCode">
            <PreviewContent>
                <TailGrid Columns="3" Gap="GridGap.Md">
                    <TailCard Header="Item 1">
                        <p class="text-gray-700 dark:text-gray-300">Content for first item</p>
                    </TailCard>
                    <TailCard Header="Item 2">
                        <p class="text-gray-700 dark:text-gray-300">Content for second item</p>
                    </TailCard>
                    <TailCard Header="Item 3">
                        <p class="text-gray-700 dark:text-gray-300">Content for third item</p>
                    </TailCard>
                </TailGrid>
            </PreviewContent>
        </CodePreview>

        <CodePreview Title="Responsive Grid (2 cols mobile, 4 cols desktop)" Code="@gridResponsiveCode">
            <PreviewContent>
                <TailGrid Columns="2" MdColumns="4" Gap="GridGap.Lg">
                    @foreach (var i in Enumerable.Range(1, 8))
                    {
                        <div class="p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg text-center">
                            <span class="text-gray-900 dark:text-white font-medium">Box @i</span>
                        </div>
                    }
                </TailGrid>
            </PreviewContent>
        </CodePreview>
    </section>

    <!-- TailContainer -->
    <section class="mb-12">
        <h2 class="text-3xl font-bold mb-4 text-gray-900 dark:text-white">Container</h2>
        <p class="text-gray-600 dark:text-gray-400 mb-6">
            Containers provide max-width constraints for better content readability.
        </p>

        <CodePreview Title="Container Sizes" Code="@containerCode">
            <PreviewContent>
                <div class="space-y-4">
                    <TailContainer Size="ContainerSize.Sm">
                        <div class="p-4 bg-purple-50 dark:bg-purple-900/20 rounded">
                            <p class="text-gray-900 dark:text-white"><strong>Small Container</strong> - max-width: 640px</p>
                        </div>
                    </TailContainer>
                    
                    <TailContainer Size="ContainerSize.Md">
                        <div class="p-4 bg-blue-50 dark:bg-blue-900/20 rounded">
                            <p class="text-gray-900 dark:text-white"><strong>Medium Container</strong> - max-width: 768px</p>
                        </div>
                    </TailContainer>
                    
                    <TailContainer Size="ContainerSize.Lg">
                        <div class="p-4 bg-green-50 dark:bg-green-900/20 rounded">
                            <p class="text-gray-900 dark:text-white"><strong>Large Container</strong> - max-width: 1024px</p>
                        </div>
                    </TailContainer>
                </div>
            </PreviewContent>
        </CodePreview>
    </section>

    <!-- TailDivider -->
    <section class="mb-12">
        <h2 class="text-3xl font-bold mb-4 text-gray-900 dark:text-white">Divider</h2>
        <p class="text-gray-600 dark:text-gray-400 mb-6">
            Visual separators for content sections with optional text labels.
        </p>

        <CodePreview Title="Divider with Text" Code="@dividerCode">
            <PreviewContent>
                <div class="space-y-4">
                    <p class="text-gray-700 dark:text-gray-300">Content above the divider</p>
                    <TailDivider Text="OR" />
                    <p class="text-gray-700 dark:text-gray-300">Content below the divider</p>
                </div>
            </PreviewContent>
        </CodePreview>

        <CodePreview Title="Plain Divider" Code="@dividerPlainCode">
            <PreviewContent>
                <div class="space-y-4">
                    <p class="text-gray-700 dark:text-gray-300">First section</p>
                    <TailDivider />
                    <p class="text-gray-700 dark:text-gray-300">Second section</p>
                    <TailDivider />
                    <p class="text-gray-700 dark:text-gray-300">Third section</p>
                </div>
            </PreviewContent>
        </CodePreview>
    </section>

    <!-- TailPanel -->
    <section class="mb-12">
        <h2 class="text-3xl font-bold mb-4 text-gray-900 dark:text-white">Panel</h2>
        <p class="text-gray-600 dark:text-gray-400 mb-6">
            Panels provide content grouping with consistent styling.
        </p>

        <CodePreview Title="Panel Component" Code="@panelCode">
            <PreviewContent>
                <TailPanel Title="Panel Title" Subtitle="Optional subtitle">
                    <p class="text-gray-700 dark:text-gray-300">
                        Panel content goes here. Panels are useful for grouping related information with a clear visual boundary.
                    </p>
                </TailPanel>
            </PreviewContent>
        </CodePreview>
    </section>

    <!-- TailSplitPane -->
    <section class="mb-12">
        <h2 class="text-3xl font-bold mb-4 text-gray-900 dark:text-white">Split Pane</h2>
        <p class="text-gray-600 dark:text-gray-400 mb-6">
            Resizable split panels with drag handles for creating flexible layouts.
        </p>

        <CodePreview Title="Horizontal Split Pane" Code="@splitPaneCode">
            <PreviewContent>
                <div class="h-64 border rounded-lg overflow-hidden">
                    <TailSplitPane 
                        Orientation="SplitPaneOrientation.Horizontal"
                        Resizable="true"
                        InitialSize="50"
                        MinSize="20"
                        MaxSize="80">
                        <FirstPaneContent>
                            <div class="p-4 h-full overflow-auto" style="background-color: var(--color-surface-2);">
                                <h3 class="font-semibold mb-2">Left Panel</h3>
                                <p class="text-sm">This is the left panel content. Drag the divider to resize.</p>
                            </div>
                        </FirstPaneContent>
                        <SecondPaneContent>
                            <div class="p-4 h-full overflow-auto" style="background-color: var(--color-surface-2);">
                                <h3 class="font-semibold mb-2">Right Panel</h3>
                                <p class="text-sm">This is the right panel content.</p>
                            </div>
                        </SecondPaneContent>
                    </TailSplitPane>
                </div>
            </PreviewContent>
        </CodePreview>
    </section>

    <!-- TailBottomSheet -->
    <section class="mb-12">
        <h2 class="text-3xl font-bold mb-4 text-gray-900 dark:text-white">Bottom Sheet</h2>
        <p class="text-gray-600 dark:text-gray-400 mb-6">
            Mobile-friendly bottom sheet/drawer with snap points and drag gestures.
        </p>

        <CodePreview Title="Bottom Sheet" Code="@bottomSheetCode">
            <PreviewContent>
                <div class="space-y-4">
                    <button @onclick="ShowBottomSheet" class="px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600">
                        Open Bottom Sheet
                    </button>
                    <TailBottomSheet 
                        Visible="@showBottomSheet"
                        VisibleChanged="OnBottomSheetChanged"
                        Title="Bottom Sheet"
                        Closable="true"
                        ShowHandle="true"
                        Size="BottomSheetSize.Md">
                        <ChildContent>
                            <div class="space-y-4">
                                <p class="text-gray-700 dark:text-gray-300">
                                    This is a bottom sheet component. It's perfect for mobile interfaces and can be dragged to close.
                                </p>
                                <div class="space-y-2">
                                    <button class="w-full px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600">
                                        Action 1
                                    </button>
                                    <button class="w-full px-4 py-2 bg-gray-200 dark:bg-gray-700 text-gray-900 dark:text-white rounded hover:bg-gray-300 dark:hover:bg-gray-600">
                                        Action 2
                                    </button>
                                </div>
                            </div>
                        </ChildContent>
                    </TailBottomSheet>
                </div>
            </PreviewContent>
        </CodePreview>
    </section>

    <!-- TailDockingLayout -->
    <section class="mb-12">
        <h2 class="text-3xl font-bold mb-4 text-gray-900 dark:text-white">Docking Layout</h2>
        <p class="text-gray-600 dark:text-gray-400 mb-6">
            Advanced docking system with tabs, floating windows, and resizable panels - similar to Visual Studio.
        </p>

        <CodePreview Title="Docking Layout" Code="@dockingLayoutCode">
            <PreviewContent>
                <div class="h-96 border rounded-lg overflow-hidden" style="border-color: var(--color-border);">
                    <TailDockingLayout Panels="@dockingPanels" ShowTabs="true" AllowDragDrop="true">
                        <ChildContent>
                            <div class="p-4 h-full flex items-center justify-center" style="background-color: var(--color-surface-2);">
                                <p class="text-gray-600 dark:text-gray-400">Main content area</p>
                            </div>
                        </ChildContent>
                    </TailDockingLayout>
                </div>
            </PreviewContent>
        </CodePreview>
    </section>

    <!-- API Reference -->
    <section class="mb-12">
        <h2 class="text-3xl font-bold mb-4 text-gray-900 dark:text-white">API Reference</h2>
        
        <h3 class="text-2xl font-semibold mb-4 text-gray-900 dark:text-white">TailCard</h3>
        <div class="overflow-x-auto mb-8">
            <table class="min-w-full divide-y divide-gray-200 dark:divide-gray-700 border border-gray-200 dark:border-gray-700">
                <thead class="bg-gray-50 dark:bg-gray-800">
                    <tr>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase">Parameter</th>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase">Type</th>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase">Default</th>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase">Description</th>
                    </tr>
                </thead>
                <tbody class="bg-white dark:bg-gray-900 divide-y divide-gray-200 dark:divide-gray-700">
                    <tr>
                        <td class="px-6 py-4 text-sm font-mono text-gray-900 dark:text-gray-100">Header</td>
                        <td class="px-6 py-4 text-sm text-gray-600 dark:text-gray-400">string?</td>
                        <td class="px-6 py-4 text-sm text-gray-600 dark:text-gray-400">null</td>
                        <td class="px-6 py-4 text-sm text-gray-600 dark:text-gray-400">Card header text</td>
                    </tr>
                    <tr>
                        <td class="px-6 py-4 text-sm font-mono text-gray-900 dark:text-gray-100">Footer</td>
                        <td class="px-6 py-4 text-sm text-gray-600 dark:text-gray-400">string?</td>
                        <td class="px-6 py-4 text-sm text-gray-600 dark:text-gray-400">null</td>
                        <td class="px-6 py-4 text-sm text-gray-600 dark:text-gray-400">Card footer text</td>
                    </tr>
                    <tr>
                        <td class="px-6 py-4 text-sm font-mono text-gray-900 dark:text-gray-100">ChildContent</td>
                        <td class="px-6 py-4 text-sm text-gray-600 dark:text-gray-400">RenderFragment</td>
                        <td class="px-6 py-4 text-sm text-gray-600 dark:text-gray-400">-</td>
                        <td class="px-6 py-4 text-sm text-gray-600 dark:text-gray-400">Card body content</td>
                    </tr>
                </tbody>
            </table>
        </div>

        <h3 class="text-2xl font-semibold mb-4 text-gray-900 dark:text-white">TailGrid</h3>
        <div class="overflow-x-auto">
            <table class="min-w-full divide-y divide-gray-200 dark:divide-gray-700 border border-gray-200 dark:border-gray-700">
                <thead class="bg-gray-50 dark:bg-gray-800">
                    <tr>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase">Parameter</th>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase">Type</th>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase">Default</th>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase">Description</th>
                    </tr>
                </thead>
                <tbody class="bg-white dark:bg-gray-900 divide-y divide-gray-200 dark:divide-gray-700">
                    <tr>
                        <td class="px-6 py-4 text-sm font-mono text-gray-900 dark:text-gray-100">Columns</td>
                        <td class="px-6 py-4 text-sm text-gray-600 dark:text-gray-400">int</td>
                        <td class="px-6 py-4 text-sm text-gray-600 dark:text-gray-400">1</td>
                        <td class="px-6 py-4 text-sm text-gray-600 dark:text-gray-400">Number of columns</td>
                    </tr>
                    <tr>
                        <td class="px-6 py-4 text-sm font-mono text-gray-900 dark:text-gray-100">Gap</td>
                        <td class="px-6 py-4 text-sm text-gray-600 dark:text-gray-400">GridGap</td>
                        <td class="px-6 py-4 text-sm text-gray-600 dark:text-gray-400">Md</td>
                        <td class="px-6 py-4 text-sm text-gray-600 dark:text-gray-400">Gap size between items</td>
                    </tr>
                    <tr>
                        <td class="px-6 py-4 text-sm font-mono text-gray-900 dark:text-gray-100">MdColumns</td>
                        <td class="px-6 py-4 text-sm text-gray-600 dark:text-gray-400">int?</td>
                        <td class="px-6 py-4 text-sm text-gray-600 dark:text-gray-400">null</td>
                        <td class="px-6 py-4 text-sm text-gray-600 dark:text-gray-400">Columns on medium screens</td>
                    </tr>
                </tbody>
            </table>
        </div>
    </section>
</div>

@code {
    private string cardCode = @"<TailCard Header=""Card Title"" Footer=""Card Footer"">
    <p>This is the card content.</p>
</TailCard>";

    private string cardCustomCode = @"<TailCard Header=""User Profile"">
    <div class=""flex items-center space-x-4"">
        <div class=""w-16 h-16 bg-blue-500 rounded-full""></div>
        <div>
            <h3 class=""font-bold"">John Doe</h3>
            <p class=""text-sm text-gray-600"">Software Developer</p>
        </div>
    </div>
</TailCard>";

    private string gridCode = @"<TailGrid Columns=""3"" Gap=""GridGap.Md"">
    <TailCard Header=""Item 1"">
        <p>Content for first item</p>
    </TailCard>
    <TailCard Header=""Item 2"">
        <p>Content for second item</p>
    </TailCard>
    <TailCard Header=""Item 3"">
        <p>Content for third item</p>
    </TailCard>
</TailGrid>";

    private string gridResponsiveCode = @"<TailGrid Columns=""2"" MdColumns=""4"" Gap=""GridGap.Lg"">
    <div class=""p-4 bg-blue-50 rounded-lg"">Box 1</div>
    <div class=""p-4 bg-blue-50 rounded-lg"">Box 2</div>
    <div class=""p-4 bg-blue-50 rounded-lg"">Box 3</div>
    <div class=""p-4 bg-blue-50 rounded-lg"">Box 4</div>
</TailGrid>";

    private string containerCode = @"<TailContainer Size=""ContainerSize.Sm"">
    <p>Small container content</p>
</TailContainer>

<TailContainer Size=""ContainerSize.Md"">
    <p>Medium container content</p>
</TailContainer>

<TailContainer Size=""ContainerSize.Lg"">
    <p>Large container content</p>
</TailContainer>";

    private string dividerCode = @"<p>Content above</p>
<TailDivider Text=""OR"" />
<p>Content below</p>";

    private string dividerPlainCode = @"<p>First section</p>
<TailDivider />
<p>Second section</p>";

    private string panelCode = @"<TailPanel Title=""Panel Title"" Subtitle=""Optional subtitle"">
    <p>Panel content goes here.</p>
</TailPanel>";

    private string dockingLayoutCode = @"<TailDockingLayout Panels=""@dockingPanels"" ShowTabs=""true"" AllowDragDrop=""true"">
    <ChildContent>
        <p>Main content area when no panels are docked in center.</p>
    </ChildContent>
</TailDockingLayout>

@code {
    private List<DockingPanel> dockingPanels = new()
    {
        new DockingPanel 
        { 
            Title = ""Properties"", 
            Position = DockingPosition.Right,
            Content = builder => builder.AddMarkupContent(0, ""<p>Properties panel content</p>"")
        },
        new DockingPanel 
        { 
            Title = ""Solution Explorer"", 
            Position = DockingPosition.Left,
            Content = builder => builder.AddMarkupContent(0, ""<p>Solution Explorer content</p>"")
        },
        new DockingPanel 
        { 
            Title = ""Output"", 
            Position = DockingPosition.Bottom,
            Content = builder => builder.AddMarkupContent(0, ""<p>Output panel content</p>"")
        }
    };
}";

    private string splitPaneCode = @"<TailSplitPane 
    Orientation=""SplitPaneOrientation.Horizontal""
    Resizable=""true""
    InitialSize=""50""
    MinSize=""20""
    MaxSize=""80"">
    <FirstPaneContent>
        <div class=""p-4"">Left Panel Content</div>
    </FirstPaneContent>
    <SecondPaneContent>
        <div class=""p-4"">Right Panel Content</div>
    </SecondPaneContent>
</TailSplitPane>";

    private List<DockingPanel> dockingPanels = new()
    {
        new DockingPanel 
        { 
            Title = "Properties", 
            Position = DockingPosition.Right,
            IsActive = true,
            Content = builder => 
            {
                builder.OpenElement(0, "div");
                builder.AddAttribute(1, "class", "p-4");
                builder.AddContent(2, "Properties panel content");
                builder.CloseElement();
            }
        },
        new DockingPanel 
        { 
            Title = "Solution Explorer", 
            Position = DockingPosition.Left,
            IsActive = true,
            Content = builder => 
            {
                builder.OpenElement(0, "div");
                builder.AddAttribute(1, "class", "p-4");
                builder.AddContent(2, "Solution Explorer content");
                builder.CloseElement();
            }
        },
        new DockingPanel 
        { 
            Title = "Output", 
            Position = DockingPosition.Bottom,
            IsActive = true,
            Content = builder => 
            {
                builder.OpenElement(0, "div");
                builder.AddAttribute(1, "class", "p-4");
                builder.AddContent(2, "Output panel content");
                builder.CloseElement();
            }
        }
    };

    private string bottomSheetCode = @"<TailBottomSheet 
    Visible=""@showSheet""
    VisibleChanged=""OnSheetChanged""
    Title=""Bottom Sheet""
    Closable=""true""
    ShowHandle=""true""
    Size=""BottomSheetSize.Md"">
    <ChildContent>
        <p>Bottom sheet content</p>
    </ChildContent>
</TailBottomSheet>";

    private bool showBottomSheet = false;

    private void ShowBottomSheet()
    {
        showBottomSheet = true;
    }

    private async Task OnBottomSheetChanged(bool visible)
    {
        showBottomSheet = visible;
        await Task.CompletedTask;
    }
}

