@page "/components/navigation"
@using Tail.Blazor.Navigation
@using Tail.Blazor.Navigation.Models
@using Tail.Blazor.Docs.Shared

<PageTitle>Navigation - Tail.Blazor</PageTitle>

<div class="container mx-auto px-4 py-8 max-w-6xl">
    <h1 class="text-4xl font-bold mb-2 text-gray-900 dark:text-white">Navigation Components</h1>
    <p class="text-lg text-gray-600 dark:text-gray-400 mb-8">
        Navigate through your application with Tabs, Breadcrumbs, Accordion, Steps, Sidebar, Menu, and Carousel components.
    </p>

    <!-- Tabs -->
    <section class="mb-12">
        <h2 class="text-3xl font-bold mb-4 text-gray-900 dark:text-white">Tabs</h2>
        <p class="text-gray-600 dark:text-gray-400 mb-6">
            Tab navigation for switching between different views or content sections.
        </p>

        <CodePreview Title="Tabs Component" Code="@tabsCode">
            <PreviewContent>
                <TailTabs Tabs="@TabItems" ActiveTab="@ActiveTab" ActiveTabChanged="OnTabChanged" />
                <div class="mt-4 p-4 bg-gray-50 dark:bg-gray-800 rounded-lg">
                    <p class="text-gray-900 dark:text-white">
                        <strong>Active Tab:</strong> @(ActiveTab?.Label ?? "None")
                    </p>
                </div>
            </PreviewContent>
        </CodePreview>
    </section>

    <!-- Breadcrumb -->
    <section class="mb-12">
        <h2 class="text-3xl font-bold mb-4 text-gray-900 dark:text-white">Breadcrumb</h2>
        <p class="text-gray-600 dark:text-gray-400 mb-6">
            Breadcrumb navigation showing the current page's location in the site hierarchy.
        </p>

        <CodePreview Title="Breadcrumb Trail" Code="@breadcrumbCode">
            <PreviewContent>
                <TailBreadcrumb Items="@BreadcrumbItems" />
            </PreviewContent>
        </CodePreview>
    </section>

    <!-- Accordion -->
    <section class="mb-12">
        <h2 class="text-3xl font-bold mb-4 text-gray-900 dark:text-white">Accordion</h2>
        <p class="text-gray-600 dark:text-gray-400 mb-6">
            Collapsible content sections for FAQs, settings, or grouped information.
        </p>

        <CodePreview Title="Accordion with Multiple Sections" Code="@accordionCode">
            <PreviewContent>
                <TailAccordion>
                    <TailAccordionItem Title="What is Tail.Blazor?" IsExpanded="true">
                        <p class="text-gray-700 dark:text-gray-300">
                            Tail.Blazor is a lightweight Blazor component library built with Tailwind CSS, 
                            designed for performance and developer productivity.
                        </p>
                    </TailAccordionItem>
                    <TailAccordionItem Title="How do I install it?">
                        <p class="text-gray-700 dark:text-gray-300">
                            Install via NuGet: <code class="px-2 py-1 bg-gray-200 dark:bg-gray-700 rounded">dotnet add package Tail.Blazor.Core</code>
                        </p>
                    </TailAccordionItem>
                    <TailAccordionItem Title="Is it free?">
                        <p class="text-gray-700 dark:text-gray-300">
                            Yes! Tail.Blazor is completely free and open-source under the MIT license.
                        </p>
                    </TailAccordionItem>
                </TailAccordion>
            </PreviewContent>
        </CodePreview>
    </section>

    <!-- Steps -->
    <section class="mb-12">
        <h2 class="text-3xl font-bold mb-4 text-gray-900 dark:text-white">Steps</h2>
        <p class="text-gray-600 dark:text-gray-400 mb-6">
            Step-by-step progress indicator for multi-step processes or wizards.
        </p>

        <CodePreview Title="Step Progress Indicator" Code="@stepsCode">
            <PreviewContent>
                <TailSteps Steps="@StepItems" CurrentStep="@currentStep" />
                <div class="mt-6 flex gap-2">
                    <button @onclick="PreviousStep" 
                            class="px-4 py-2 bg-gray-200 dark:bg-gray-700 text-gray-900 dark:text-white rounded hover:bg-gray-300 dark:hover:bg-gray-600"
                            disabled="@(currentStep == 0)">
                        Previous
                    </button>
                    <button @onclick="NextStep" 
                            class="px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600"
                            disabled="@(currentStep == StepItems.Count - 1)">
                        Next
                    </button>
                </div>
            </PreviewContent>
        </CodePreview>
    </section>

    <!-- Sidebar -->
    <section class="mb-12">
        <h2 class="text-3xl font-bold mb-4 text-gray-900 dark:text-white">Sidebar</h2>
        <p class="text-gray-600 dark:text-gray-400 mb-6">
            Collapsible sidebar for app navigation with menu items.
        </p>

        <CodePreview Title="Sidebar with Menu" Code="@sidebarCode">
            <PreviewContent>
                <div class="h-64 relative border border-gray-200 dark:border-gray-700 rounded overflow-hidden">
                    <TailSidebar IsCollapsed="@isSidebarCollapsed" Collapsible="true">
                        <HeaderContent>
                            <div class="flex items-center justify-between p-4">
                                <h3 class="text-lg font-semibold text-gray-900 dark:text-white">Menu</h3>
                                <button @onclick="ToggleSidebar" class="p-1 hover:bg-gray-200 dark:hover:bg-gray-700 rounded">
                                    <svg class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
                                    </svg>
                                </button>
                            </div>
                        </HeaderContent>
                        <ChildContent>
                            <TailMenu>
                                <TailMenuItem Text="Dashboard" Icon="??" />
                                <TailMenuItem Text="Settings" Icon="??" />
                                <TailMenuItem Text="Profile" Icon="??" />
                                <TailMenuItem Text="Logout" Icon="??" />
                            </TailMenu>
                        </ChildContent>
                    </TailSidebar>
                </div>
            </PreviewContent>
        </CodePreview>
    </section>

    <!-- Menu -->
    <section class="mb-12">
        <h2 class="text-3xl font-bold mb-4 text-gray-900 dark:text-white">Menu</h2>
        <p class="text-gray-600 dark:text-gray-400 mb-6">
            Vertical menu component for navigation links.
        </p>

        <CodePreview Title="Menu Items" Code="@menuCode">
            <PreviewContent>
                <div class="max-w-xs">
                    <TailMenu>
                        <TailMenuItem Text="Home" Icon="??" />
                        <TailMenuItem Text="About" Icon="??" />
                        <TailMenuItem Text="Services" Icon="???" />
                        <TailMenuItem Text="Contact" Icon="??" />
                    </TailMenu>
                </div>
            </PreviewContent>
        </CodePreview>
    </section>

    <!-- Carousel -->
    <section class="mb-12">
        <h2 class="text-3xl font-bold mb-4 text-gray-900 dark:text-white">Carousel</h2>
        <p class="text-gray-600 dark:text-gray-400 mb-6">
            Image or content carousel with auto-play, indicators, and navigation arrows.
        </p>

        <CodePreview Title="Auto-Play Carousel" Code="@carouselCode">
            <PreviewContent>
                <TailCarousel 
                    Slides="@CarouselSlides" 
                    AutoPlay="true" 
                    AutoPlayInterval="3000" 
                    ShowIndicators="true" 
                    ShowArrows="true" />
            </PreviewContent>
        </CodePreview>
    </section>

    <!-- TODO: Implement these advanced navigation components
    <section class="mb-12">
        <h2 class="text-3xl font-bold mb-4">Context Menu</h2>
        <p class="text-gray-600 dark:text-gray-400 mb-6">
            Component not yet implemented. Coming soon!
        </p>
    </section>

    <section class="mb-12">
        <h2 class="text-3xl font-bold mb-4">Pagination</h2>
        <p class="text-gray-600 dark:text-gray-400 mb-6">
            Component not yet implemented. Coming soon!
        </p>
    </section>

    <section class="mb-12">
        <h2 class="text-3xl font-bold mb-4">Command Palette</h2>
        <p class="text-gray-600 dark:text-gray-400 mb-6">
            Component not yet implemented. Coming soon!
        </p>
    </section>

    <section class="mb-12">
        <h2 class="text-3xl font-bold mb-4">Floating Action Menu</h2>
        <p class="text-gray-600 dark:text-gray-400 mb-6">
            Component not yet implemented. Coming soon!
        </p>
    </section>

    <section class="mb-12">
        <h2 class="text-3xl font-bold mb-4">Mega Menu</h2>
        <p class="text-gray-600 dark:text-gray-400 mb-6">
            Component not yet implemented. Coming soon!
        </p>
    </section>

    <section class="mb-12">
        <h2 class="text-3xl font-bold mb-4">Scroll Spy</h2>
        <p class="text-gray-600 dark:text-gray-400 mb-6">
            Component not yet implemented. Coming soon!
        </p>
    </section>
    -->

    <!-- API Reference -->
    <section class="mb-12">
        <h2 class="text-3xl font-bold mb-4 text-gray-900 dark:text-white">API Reference</h2>
        
        <h3 class="text-2xl font-semibold mb-4 text-gray-900 dark:text-white">TailTabs</h3>
        <div class="overflow-x-auto mb-8">
            <table class="min-w-full divide-y divide-gray-200 dark:divide-gray-700 border border-gray-200 dark:border-gray-700">
                <thead class="bg-gray-50 dark:bg-gray-800">
                    <tr>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase">Parameter</th>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase">Type</th>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase">Description</th>
                    </tr>
                </thead>
                <tbody class="bg-white dark:bg-gray-900 divide-y divide-gray-200 dark:divide-gray-700">
                    <tr>
                        <td class="px-6 py-4 text-sm font-mono text-gray-900 dark:text-gray-100">Tabs</td>
                        <td class="px-6 py-4 text-sm text-gray-600 dark:text-gray-400">List&lt;Tail.Blazor.Navigation.Models.TabItem&gt;</td>
                        <td class="px-6 py-4 text-sm text-gray-600 dark:text-gray-400">List of tab items</td>
                    </tr>
                    <tr>
                        <td class="px-6 py-4 text-sm font-mono text-gray-900 dark:text-gray-100">ActiveTab</td>
                        <td class="px-6 py-4 text-sm text-gray-600 dark:text-gray-400">Tail.Blazor.Navigation.Models.TabItem?</td>
                        <td class="px-6 py-4 text-sm text-gray-600 dark:text-gray-400">Currently active tab</td>
                    </tr>
                    <tr>
                        <td class="px-6 py-4 text-sm font-mono text-gray-900 dark:text-gray-100">ActiveTabChanged</td>
                        <td class="px-6 py-4 text-sm text-gray-600 dark:text-gray-400">EventCallback&lt;Tail.Blazor.Navigation.Models.TabItem&gt;</td>
                        <td class="px-6 py-4 text-sm text-gray-600 dark:text-gray-400">Event when tab changes</td>
                    </tr>
                </tbody>
            </table>
        </div>

        <h3 class="text-2xl font-semibold mb-4 text-gray-900 dark:text-white">TailAccordion</h3>
        <div class="overflow-x-auto">
            <table class="min-w-full divide-y divide-gray-200 dark:divide-gray-700 border border-gray-200 dark:border-gray-700">
                <thead class="bg-gray-50 dark:bg-gray-800">
                    <tr>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase">Parameter</th>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase">Type</th>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase">Description</th>
                    </tr>
                </thead>
                <tbody class="bg-white dark:bg-gray-900 divide-y divide-gray-200 dark:divide-gray-700">
                    <tr>
                        <td class="px-6 py-4 text-sm font-mono text-gray-900 dark:text-gray-100">Title</td>
                        <td class="px-6 py-4 text-sm text-gray-600 dark:text-gray-400">string</td>
                        <td class="px-6 py-4 text-sm text-gray-600 dark:text-gray-400">Section title</td>
                    </tr>
                    <tr>
                        <td class="px-6 py-4 text-sm font-mono text-gray-900 dark:text-gray-100">IsExpanded</td>
                        <td class="px-6 py-4 text-sm text-gray-600 dark:text-gray-400">bool</td>
                        <td class="px-6 py-4 text-sm text-gray-600 dark:text-gray-400">Initially expanded</td>
                    </tr>
                </tbody>
            </table>
        </div>
    </section>
</div>

@code {
    private Tail.Blazor.Navigation.TabItem? ActiveTab { get; set; }
    private bool isSidebarCollapsed = false;
    private int currentStep = 1;

    private List<Tail.Blazor.Navigation.TabItem> TabItems { get; set; } = new()
    {
        new Tail.Blazor.Navigation.TabItem { Label = "Overview" },
        new Tail.Blazor.Navigation.TabItem { Label = "Features" },
        new Tail.Blazor.Navigation.TabItem { Label = "Documentation" },
        new Tail.Blazor.Navigation.TabItem { Label = "Examples" }
    };

    private List<Tail.Blazor.Navigation.BreadcrumbItem> BreadcrumbItems { get; set; } = new()
    {
        new Tail.Blazor.Navigation.BreadcrumbItem { Text = "Home", Href = "/" },
        new Tail.Blazor.Navigation.BreadcrumbItem { Text = "Components", Href = "/components" },
        new Tail.Blazor.Navigation.BreadcrumbItem { Text = "Navigation" }
    };

    private List<Tail.Blazor.Navigation.StepItem> StepItems { get; set; } = new()
    {
        new Tail.Blazor.Navigation.StepItem { Title = "Account", Description = "Create your account" },
        new Tail.Blazor.Navigation.StepItem { Title = "Profile", Description = "Setup your profile" },
        new Tail.Blazor.Navigation.StepItem { Title = "Preferences", Description = "Set preferences" },
        new Tail.Blazor.Navigation.StepItem { Title = "Complete", Description = "All done!" }
    };

    private List<Tail.Blazor.Navigation.CarouselSlide> CarouselSlides { get; set; } = new()
    {
        new Tail.Blazor.Navigation.CarouselSlide 
        { 
            Content = new RenderFragment(builder => 
            {
                builder.OpenElement(0, "div");
                builder.AddAttribute(1, "class", "h-64 flex items-center justify-center text-white text-3xl font-bold");
                builder.AddAttribute(2, "style", "background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);");
                builder.AddContent(3, "Slide 1");
                builder.CloseElement();
            })
        },
        new Tail.Blazor.Navigation.CarouselSlide 
        { 
            Content = new RenderFragment(builder => 
            {
                builder.OpenElement(0, "div");
                builder.AddAttribute(1, "class", "h-64 flex items-center justify-center text-white text-3xl font-bold");
                builder.AddAttribute(2, "style", "background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);");
                builder.AddContent(3, "Slide 2");
                builder.CloseElement();
            })
        },
        new Tail.Blazor.Navigation.CarouselSlide 
        { 
            Content = new RenderFragment(builder => 
            {
                builder.OpenElement(0, "div");
                builder.AddAttribute(1, "class", "h-64 flex items-center justify-center text-white text-3xl font-bold");
                builder.AddAttribute(2, "style", "background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);");
                builder.AddContent(3, "Slide 3");
                builder.CloseElement();
            })
        }
    };

    private string tabsCode = @"<TailTabs 
    Tabs=""@TabItems"" 
    ActiveTab=""@ActiveTab"" 
    ActiveTabChanged=""OnTabChanged"" />

@code {
    private Tail.Blazor.Navigation.TabItem? ActiveTab { get; set; };
    private List<Tail.Blazor.Navigation.TabItem> TabItems { get; set; } = new()
    {
        new Tail.Blazor.Navigation.TabItem { Label = ""Tab 1"" },
        new Tail.Blazor.Navigation.TabItem { Label = ""Tab 2"" },
        new Tail.Blazor.Navigation.TabItem { Label = ""Tab 3"" }
    };

    private void OnTabChanged(Tail.Blazor.Navigation.TabItem tab)
    {
        ActiveTab = tab;
    }
}";

    private string breadcrumbCode = @"<TailBreadcrumb Items=""@BreadcrumbItems"" />

@code {
    private List<BreadcrumbItem> BreadcrumbItems { get; set; } = new()
    {
        new BreadcrumbItem { Text = ""Home"", Href = ""/"" },
        new BreadcrumbItem { Text = ""Components"", Href = ""/components"" },
        new BreadcrumbItem { Text = ""Navigation"" }
    };
}";

    private string accordionCode = @"<TailAccordion>
    <TailAccordionItem Title=""Section 1"" IsExpanded=""true"">
        <p>Content for section 1</p>
    </TailAccordionItem>
    <TailAccordionItem Title=""Section 2"">
        <p>Content for section 2</p>
    </TailAccordionItem>
    <TailAccordionItem Title=""Section 3"">
        <p>Content for section 3</p>
    </TailAccordionItem>
</TailAccordion>";

    private string stepsCode = @"<TailSteps Steps=""@StepItems"" CurrentStep=""@currentStep"" />

@code {
    private int currentStep = 1;
    private List<StepItem> StepItems { get; set; } = new()
    {
        new StepItem { Title = ""Account"", Description = ""Create account"" },
        new StepItem { Title = ""Profile"", Description = ""Setup profile"" },
        new StepItem { Title = ""Complete"", Description = ""All done!"" }
    };
}";

    private string sidebarCode = @"<TailSidebar IsCollapsed=""@isCollapsed"" Collapsible=""true"">
    <HeaderContent>
        <h3>Menu</h3>
    </HeaderContent>
    <ChildContent>
        <TailMenu>
            <TailMenuItem Text=""Dashboard"" />
            <TailMenuItem Text=""Settings"" />
            <TailMenuItem Text=""Profile"" />
        </TailMenu>
    </ChildContent>
</TailSidebar>";

    private string menuCode = @"<TailMenu>
    <TailMenuItem Text=""Home"" Icon=""??"" />
    <TailMenuItem Text=""About"" Icon=""??"" />
    <TailMenuItem Text=""Contact"" Icon=""??"" />
</TailMenu>";

    private string carouselCode = @"<TailCarousel 
    Slides=""@CarouselSlides"" 
    AutoPlay=""true"" 
    AutoPlayInterval=""3000"" 
    ShowIndicators=""true"" 
    ShowArrows=""true"" />";

    private string commandPaletteCode = @"<TailCommandPalette 
    Visible=""@showPalette""
    VisibleChanged=""OnPaletteChanged""
    Items=""@Commands""
    Placeholder=""Type a command or search...""
    GroupByCategory=""true""
    OnCommandExecuted=""OnCommandExecuted"" />

@code {
    private bool showPalette = false;
    private List<CommandPaletteItem> Commands { get; set; } = new()
    {
        new CommandPaletteItem 
        { 
            Text = ""New File"", 
            Icon = ""ðŸ“„"", 
            Category = ""File"",
            Shortcut = ""Ctrl+N"",
            OnExecute = EventCallback.Factory.Create(this, () => { /* Create new file */ })
        },
        new CommandPaletteItem 
        { 
            Text = ""Open Settings"", 
            Icon = ""âš™ï¸"", 
            Category = ""Settings"",
            OnExecute = EventCallback.Factory.Create(this, () => { /* Open settings */ })
        }
    };
}";

    protected override void OnInitialized()
    {
        ActiveTab = TabItems.FirstOrDefault();
    }

    private void OnTabChanged(Tail.Blazor.Navigation.TabItem tab)
    {
        ActiveTab = tab;
    }

    private void ToggleSidebar()
    {
        isSidebarCollapsed = !isSidebarCollapsed;
    }

    private void NextStep()
    {
        if (currentStep < StepItems.Count - 1)
        {
            currentStep++;
        }
    }

    private void PreviousStep()
    {
        if (currentStep > 0)
        {
            currentStep--;
        }
    }
}
