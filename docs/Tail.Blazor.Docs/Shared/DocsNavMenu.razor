@using Tail.Blazor.Layout
@using Tail.Blazor.Core.Theme
@inject NavigationManager Navigation
@implements IDisposable

<div class="docs-nav-sidebar">
    <div class="docs-nav-header">
        <div>
            <h1 class="docs-nav-title">Tail.Blazor</h1>
            <p class="docs-nav-version">v1.0.0</p>
        </div>
        <TailThemeToggle />
    </div>

    <div class="docs-nav-content">
        <TailNavMenu Items="@navMenuItems" Size="NavMenuSize.Md" ShowIcons="true" ShowBadges="false" />
    </div>
</div>

@code {
    private string? _currentPath;
    private List<NavMenuItem> navMenuItems = new();

    protected override void OnInitialized()
    {
        _currentPath = Navigation.Uri;
        Navigation.LocationChanged += OnLocationChanged;
        
        // Build navigation menu items with expandable groups
        navMenuItems = new List<NavMenuItem>
        {
            new NavMenuItem { Href = "/", Text = "Home", Icon = "üè†", ExactMatch = true },
            
            // Documentation Section (expandable)
            new NavMenuItem 
            { 
                Text = "Documentation", 
                Icon = "üìö",
                Children = new List<NavMenuItem>
                {
                    new NavMenuItem { Href = "/docs", Text = "Overview" },
                    new NavMenuItem { Href = "/docs/installation", Text = "Installation" },
                    new NavMenuItem { Href = "/getting-started", Text = "Quick Start" }
                }
            },
            
            // Components Section (expandable)
            new NavMenuItem 
            { 
                Text = "Components", 
                Icon = "üß©",
                Children = new List<NavMenuItem>
                {
                    new NavMenuItem { Href = "/components", Text = "Overview" },
                    new NavMenuItem { Href = "/components/summary", Text = "Components Summary", Icon = "üìã" },
                    new NavMenuItem { IsDivider = true },
                    new NavMenuItem { Href = "/components/buttons", Text = "Buttons" },
                    new NavMenuItem { Href = "/components/forms", Text = "Forms" },
                    new NavMenuItem { Href = "/components/layout", Text = "Layout" },
                    new NavMenuItem { Href = "/components/navigation", Text = "Navigation" },
                    new NavMenuItem { Href = "/components/feedback", Text = "Feedback" },
                    new NavMenuItem { Href = "/components/data", Text = "Data" }
                }
            },
            
            // Theming Section (expandable)
            new NavMenuItem 
            { 
                Text = "Theming", 
                Icon = "üé®",
                Children = new List<NavMenuItem>
                {
                    new NavMenuItem { Href = "/theming", Text = "Overview" },
                    new NavMenuItem { Href = "/theme-toggle-demo", Text = "Theme Toggle" },
                    new NavMenuItem { Href = "/theme-selector-demo", Text = "Theme Selector" },
                    new NavMenuItem { Href = "/docs/theme-integration", Text = "Theme Integration" }
                }
            },
            
            // Resources
            new NavMenuItem { IsDivider = true },
            new NavMenuItem { Href = "/examples", Text = "Examples", Icon = "üí°" },
            new NavMenuItem { Href = "/best-practices", Text = "Best Practices", Icon = "‚ú®" },
            new NavMenuItem { Href = "/faq", Text = "FAQ", Icon = "‚ùì" },
            new NavMenuItem { Href = "/api", Text = "API Reference", Icon = "üìö" },
            new NavMenuItem { Href = "/scope", Text = "Scope & Status", Icon = "üìä" },
            new NavMenuItem { Href = "/layout-modes", Text = "Layout Modes", Icon = "üìê" },
            new NavMenuItem { Href = "/layout-demo", Text = "Layout Demo", Icon = "üé®" }
        };
    }

    private void OnLocationChanged(object? sender, Microsoft.AspNetCore.Components.Routing.LocationChangedEventArgs e)
    {
        _currentPath = e.Location;
        InvokeAsync(StateHasChanged);
    }

    public void Dispose()
    {
        Navigation.LocationChanged -= OnLocationChanged;
    }
}
