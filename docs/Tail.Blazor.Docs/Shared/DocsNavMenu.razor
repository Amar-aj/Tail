@using Tail.Blazor.Layout
@using Tail.Blazor.Core.Theme
@inject NavigationManager Navigation
@implements IDisposable

<div class="docs-nav-sidebar">
    <div class="docs-nav-header">
        <div>
            <h1 class="docs-nav-title">Tail.Blazor</h1>
            <p class="docs-nav-version">v1.0.0</p>
        </div>
        <TailThemeToggle />
    </div>

    <div class="docs-nav-content">
        <TailNavMenu Items="@navMenuItems" Size="NavMenuSize.Md" ShowIcons="true" ShowBadges="false" />
    </div>
</div>

@code {
    private string? _currentPath;
    private List<NavMenuItem> navMenuItems = new();

    protected override void OnInitialized()
    {
        _currentPath = Navigation.Uri;
        Navigation.LocationChanged += OnLocationChanged;
        
        // Build navigation menu items with expandable groups
        navMenuItems = new List<NavMenuItem>
        {
            new NavMenuItem { Href = "/", Text = "Home", Icon = "üè†", ExactMatch = true },
            
            // Documentation Section (expandable)
            new NavMenuItem 
            { 
                Text = "Documentation", 
                Icon = "üìö",
                Children = new List<NavMenuItem>
                {
                    new NavMenuItem { Href = "/docs", Text = "Overview" },
                    new NavMenuItem { Href = "/docs/installation", Text = "Installation" },
                    new NavMenuItem { Href = "/getting-started", Text = "Quick Start" }
                }
            },
            
            // Independent Component Packages Section (expandable)
            new NavMenuItem 
            { 
                Text = "Independent Component Packages", 
                Icon = "üì¶",
                Children = new List<NavMenuItem>
                {
                    // Buttons
                    new NavMenuItem 
                    { 
                        Text = "Buttons", 
                        Icon = "üîò",
                        Children = new List<NavMenuItem>
                        {
                            new NavMenuItem { Href = "/components/button", Text = "Button" },
                            new NavMenuItem { Href = "/components/icon-button", Text = "IconButton" },
                            new NavMenuItem { Href = "/components/toggle-button", Text = "ToggleButton" },
                            new NavMenuItem { Href = "/components/split-button", Text = "SplitButton" },
                            new NavMenuItem { Href = "/components/fab", Text = "FAB" },
                            new NavMenuItem { Href = "/components/button-group", Text = "ButtonGroup" }
                        }
                    },
                    
                    // Forms
                    new NavMenuItem 
                    { 
                        Text = "Forms", 
                        Icon = "üìù",
                        Children = new List<NavMenuItem>
                        {
                            new NavMenuItem { Href = "/components/input", Text = "Input" },
                            new NavMenuItem { Href = "/components/textarea", Text = "Textarea" },
                            new NavMenuItem { Href = "/components/select", Text = "Select" },
                            new NavMenuItem { Href = "/components/checkbox", Text = "Checkbox" },
                            new NavMenuItem { Href = "/components/radio", Text = "Radio" },
                            new NavMenuItem { Href = "/components/radio-group", Text = "RadioGroup" },
                            new NavMenuItem { Href = "/components/switch", Text = "Switch" },
                            new NavMenuItem { Href = "/components/slider", Text = "Slider" },
                            new NavMenuItem { Href = "/components/rating", Text = "Rating" },
                            new NavMenuItem { Href = "/components/date-picker", Text = "DatePicker" },
                            new NavMenuItem { Href = "/components/date-range-picker", Text = "DateRangePicker" },
                            new NavMenuItem { Href = "/components/time-picker", Text = "TimePicker" },
                            new NavMenuItem { Href = "/components/color-picker", Text = "ColorPicker" },
                            new NavMenuItem { Href = "/components/file-upload", Text = "FileUpload" },
                            new NavMenuItem { Href = "/components/image-cropper", Text = "ImageCropper" },
                            new NavMenuItem { Href = "/components/auto-complete", Text = "AutoComplete" },
                            new NavMenuItem { Href = "/components/multi-select", Text = "MultiSelect" },
                            new NavMenuItem { Href = "/components/tag-input", Text = "TagInput" },
                            new NavMenuItem { Href = "/components/mask", Text = "Mask" },
                            new NavMenuItem { Href = "/components/numeric", Text = "Numeric" },
                            new NavMenuItem { Href = "/components/currency-input", Text = "CurrencyInput" },
                            new NavMenuItem { Href = "/components/phone-number-input", Text = "PhoneNumberInput" },
                            new NavMenuItem { Href = "/components/otp-input", Text = "OTPInput" },
                            new NavMenuItem { Href = "/components/password-strength-meter", Text = "PasswordStrengthMeter" },
                            new NavMenuItem { Href = "/components/rich-text-editor", Text = "RichTextEditor" },
                            new NavMenuItem { Href = "/components/audio-recorder", Text = "AudioRecorder" }
                        }
                    },
                    
                    // Layout
                    new NavMenuItem 
                    { 
                        Text = "Layout", 
                        Icon = "üìê",
                        Children = new List<NavMenuItem>
                        {
                            new NavMenuItem { Href = "/components/container", Text = "Container" },
                            new NavMenuItem { Href = "/components/grid", Text = "Grid" },
                            new NavMenuItem { Href = "/components/panel", Text = "Panel" },
                            new NavMenuItem { Href = "/components/card", Text = "Card" },
                            new NavMenuItem { Href = "/components/divider", Text = "Divider" },
                            new NavMenuItem { Href = "/components/header", Text = "Header" },
                            new NavMenuItem { Href = "/components/nav-menu", Text = "NavMenu" },
                            new NavMenuItem { Href = "/components/responsive-layout", Text = "ResponsiveLayout" },
                            new NavMenuItem { Href = "/components/split-pane", Text = "SplitPane" },
                            new NavMenuItem { Href = "/components/docking-layout", Text = "DockingLayout" },
                            new NavMenuItem { Href = "/components/bottom-sheet", Text = "BottomSheet" },
                            new NavMenuItem { Href = "/components/collapsible-menu", Text = "CollapsibleMenu" }
                        }
                    },
                    
                    // Navigation
                    new NavMenuItem 
                    { 
                        Text = "Navigation", 
                        Icon = "üß≠",
                        Children = new List<NavMenuItem>
                        {
                            new NavMenuItem { Href = "/components/accordion", Text = "Accordion" },
                            new NavMenuItem { Href = "/components/accordion-item", Text = "AccordionItem" },
                            new NavMenuItem { Href = "/components/tabs", Text = "Tabs" },
                            new NavMenuItem { Href = "/components/breadcrumb", Text = "Breadcrumb" },
                            new NavMenuItem { Href = "/components/menu", Text = "Menu" },
                            new NavMenuItem { Href = "/components/menu-item", Text = "MenuItem" },
                            new NavMenuItem { Href = "/components/sidebar", Text = "Sidebar" },
                            new NavMenuItem { Href = "/components/steps", Text = "Steps" },
                            new NavMenuItem { Href = "/components/pagination", Text = "Pagination" },
                            new NavMenuItem { Href = "/components/carousel", Text = "Carousel" },
                            new NavMenuItem { Href = "/components/mega-menu", Text = "MegaMenu" },
                            new NavMenuItem { Href = "/components/context-menu", Text = "ContextMenu" },
                            new NavMenuItem { Href = "/components/floating-action-menu", Text = "FloatingActionMenu" },
                            new NavMenuItem { Href = "/components/command-palette", Text = "CommandPalette" },
                            new NavMenuItem { Href = "/components/scroll-spy", Text = "ScrollSpy" }
                        }
                    },
                    
                    // Feedback
                    new NavMenuItem 
                    { 
                        Text = "Feedback", 
                        Icon = "üí¨",
                        Children = new List<NavMenuItem>
                        {
                            new NavMenuItem { Href = "/components/alert", Text = "Alert" },
                            new NavMenuItem { Href = "/components/badge", Text = "Badge" },
                            new NavMenuItem { Href = "/components/dialog", Text = "Dialog" },
                            new NavMenuItem { Href = "/components/toast", Text = "Toast" },
                            new NavMenuItem { Href = "/components/toast-container", Text = "ToastContainer" },
                            new NavMenuItem { Href = "/components/spinner", Text = "Spinner" },
                            new NavMenuItem { Href = "/components/progress", Text = "Progress" },
                            new NavMenuItem { Href = "/components/progress-bar-circular", Text = "ProgressBarCircular" },
                            new NavMenuItem { Href = "/components/skeleton", Text = "Skeleton" },
                            new NavMenuItem { Href = "/components/empty-state", Text = "EmptyState" },
                            new NavMenuItem { Href = "/components/popconfirm", Text = "Popconfirm" },
                            new NavMenuItem { Href = "/components/confetti", Text = "Confetti" },
                            new NavMenuItem { Href = "/components/notification-center", Text = "NotificationCenter" },
                            new NavMenuItem { Href = "/components/tour", Text = "Tour" }
                        }
                    },
                    
                    // Data
                    new NavMenuItem 
                    { 
                        Text = "Data", 
                        Icon = "üìä",
                        Children = new List<NavMenuItem>
                        {
                            new NavMenuItem { Href = "/components/data-grid", Text = "DataGrid" },
                            new NavMenuItem { Href = "/components/list-view", Text = "ListView" },
                            new NavMenuItem { Href = "/components/tree", Text = "Tree" },
                            new NavMenuItem { Href = "/components/scheduler", Text = "Scheduler" },
                            new NavMenuItem { Href = "/components/pager", Text = "Pager" },
                            new NavMenuItem { Href = "/components/virtual-scroll", Text = "VirtualScroll" },
                            new NavMenuItem { Href = "/components/advanced-filter", Text = "AdvancedFilter" },
                            new NavMenuItem { Href = "/components/kanban-board", Text = "KanbanBoard" },
                            new NavMenuItem { Href = "/components/pivot-data-grid", Text = "PivotDataGrid" },
                            new NavMenuItem { Href = "/components/responsive-table", Text = "ResponsiveTable" }
                        }
                    },
                    
                    // Charts
                    new NavMenuItem 
                    { 
                        Text = "Charts", 
                        Icon = "üìà",
                        Children = new List<NavMenuItem>
                        {
                            new NavMenuItem { Href = "/components/chart", Text = "Chart" },
                            new NavMenuItem { Href = "/components/sparkline", Text = "Sparkline" }
                        }
                    },
                    
                    // Visualization
                    new NavMenuItem 
                    { 
                        Text = "Visualization", 
                        Icon = "üé®",
                        Children = new List<NavMenuItem>
                        {
                            new NavMenuItem { Href = "/components/timeline", Text = "Timeline" },
                            new NavMenuItem { Href = "/components/arc-gauge", Text = "ArcGauge" },
                            new NavMenuItem { Href = "/components/flowchart", Text = "Flowchart" },
                            new NavMenuItem { Href = "/components/gantt-chart", Text = "GanttChart" },
                            new NavMenuItem { Href = "/components/organization-chart", Text = "OrganizationChart" },
                            new NavMenuItem { Href = "/components/qr-code", Text = "QRCode" }
                        }
                    },
                    
                    // Validators
                    new NavMenuItem 
                    { 
                        Text = "Validators", 
                        Icon = "‚úÖ",
                        Children = new List<NavMenuItem>
                        {
                            new NavMenuItem { Href = "/components/validator", Text = "Validator" },
                            new NavMenuItem { Href = "/components/required-validator", Text = "RequiredValidator" },
                            new NavMenuItem { Href = "/components/email-validator", Text = "EmailValidator" },
                            new NavMenuItem { Href = "/components/length-validator", Text = "LengthValidator" },
                            new NavMenuItem { Href = "/components/range-validator", Text = "RangeValidator" },
                            new NavMenuItem { Href = "/components/numeric-range-validator", Text = "NumericRangeValidator" },
                            new NavMenuItem { Href = "/components/regex-validator", Text = "RegexValidator" },
                            new NavMenuItem { Href = "/components/compare-validator", Text = "CompareValidator" },
                            new NavMenuItem { Href = "/components/custom-validator", Text = "CustomValidator" }
                        }
                    },
                    
                    // Utils
                    new NavMenuItem 
                    { 
                        Text = "Utils", 
                        Icon = "üõ†Ô∏è",
                        Children = new List<NavMenuItem>
                        {
                            new NavMenuItem { Href = "/components/clipboard", Text = "Clipboard" },
                            new NavMenuItem { Href = "/components/image-zoom", Text = "ImageZoom" }
                        }
                    },
                    
                    // Icons
                    new NavMenuItem 
                    { 
                        Text = "Icons", 
                        Icon = "üéØ",
                        Children = new List<NavMenuItem>
                        {
                            new NavMenuItem { Href = "/components/icon", Text = "Icon" }
                        }
                    }
                }
            },
            
            // Meta Packages Section (expandable)
            new NavMenuItem 
            { 
                Text = "Meta Packages", 
                Icon = "üìö",
                Children = new List<NavMenuItem>
                {
                    new NavMenuItem { Href = "/packages/core", Text = "Tail.Blazor.Core", Icon = "‚öôÔ∏è" },
                    new NavMenuItem { Href = "/packages/buttons", Text = "Tail.Blazor.Buttons", Icon = "üîò" },
                    new NavMenuItem { Href = "/packages/forms", Text = "Tail.Blazor.Forms", Icon = "üìù" },
                    new NavMenuItem { Href = "/packages/layout", Text = "Tail.Blazor.Layout", Icon = "üìê" },
                    new NavMenuItem { Href = "/packages/navigation", Text = "Tail.Blazor.Navigation", Icon = "üß≠" },
                    new NavMenuItem { Href = "/packages/feedback", Text = "Tail.Blazor.Feedback", Icon = "üí¨" },
                    new NavMenuItem { Href = "/packages/data", Text = "Tail.Blazor.Data", Icon = "üìä" },
                    new NavMenuItem { Href = "/packages/charts", Text = "Tail.Blazor.Charts", Icon = "üìà" },
                    new NavMenuItem { Href = "/packages/visualization", Text = "Tail.Blazor.Visualization", Icon = "üé®" },
                    new NavMenuItem { Href = "/packages/validators", Text = "Tail.Blazor.Validators", Icon = "‚úÖ" },
                    new NavMenuItem { Href = "/packages/utils", Text = "Tail.Blazor.Utils", Icon = "üõ†Ô∏è" },
                    new NavMenuItem { Href = "/packages/icons", Text = "Tail.Blazor.Icons", Icon = "üéØ" }
                }
            },
            
            // Theming Section (expandable)
            new NavMenuItem 
            { 
                Text = "Theming", 
                Icon = "üé®",
                Children = new List<NavMenuItem>
                {
                    new NavMenuItem { Href = "/theming", Text = "Overview" },
                    new NavMenuItem { Href = "/theme-toggle-demo", Text = "Theme Toggle" },
                    new NavMenuItem { Href = "/theme-selector-demo", Text = "Theme Selector" },
                    new NavMenuItem { Href = "/docs/theme-integration", Text = "Theme Integration" }
                }
            },
            
            // Resources
            new NavMenuItem { IsDivider = true },
            new NavMenuItem { Href = "/examples", Text = "Examples", Icon = "üí°" },
            new NavMenuItem { Href = "/best-practices", Text = "Best Practices", Icon = "‚ú®" },
            new NavMenuItem { Href = "/faq", Text = "FAQ", Icon = "‚ùì" },
            new NavMenuItem { Href = "/api", Text = "API Reference", Icon = "üìö" },
            new NavMenuItem { Href = "/scope", Text = "Scope & Status", Icon = "üìä" },
            new NavMenuItem { Href = "/layout-modes", Text = "Layout Modes", Icon = "üìê" },
            new NavMenuItem { Href = "/layout-demo", Text = "Layout Demo", Icon = "üé®" }
        };
    }

    private void OnLocationChanged(object? sender, Microsoft.AspNetCore.Components.Routing.LocationChangedEventArgs e)
    {
        _currentPath = e.Location;
        InvokeAsync(StateHasChanged);
    }

    public void Dispose()
    {
        Navigation.LocationChanged -= OnLocationChanged;
    }
}
