@inherits TailComponentBase
@using Microsoft.AspNetCore.Components.Web
@using Tail.Blazor.Timeline

<div class="@GetTimelineClasses()" style="@GetTimelineStyles()">
    @foreach (var item in Items)
    {
        <div class="flex items-start">
            <div class="flex-shrink-0">
                <div class="w-3 h-3 rounded-full border-2" style="background-color: var(--color-primary); border-color: var(--color-primary);"></div>
                @if (item != Items.Last())
                {
                    <div class="w-0.5 h-full ml-1.5" style="background-color: var(--color-border, #e5e7eb);"></div>
                }
            </div>
            <div class="ml-4 pb-8">
                <div class="font-semibold" style="color: var(--color-text-primary, black);">@item.Title</div>
                @if (!string.IsNullOrEmpty(item.Description))
                {
                    <div class="text-sm mt-1" style="color: var(--color-text-secondary, #6b7280);">@item.Description</div>
                }
                @if (item.Timestamp.HasValue)
                {
                    <div class="text-xs mt-1" style="color: var(--color-text-secondary, #6b7280);">@item.Timestamp.Value.ToString("g")</div>
                }
            </div>
        </div>
    }
</div>

@code {
    [Parameter] public List<TimelineItem> Items { get; set; } = new();
    [Parameter] public string? Style { get; set; }

    private string GetTimelineClasses()
    {
        var classes = new List<string> { "relative" };
        if (!string.IsNullOrEmpty(Class))
        {
            classes.Add(Class);
        }
        return string.Join(" ", classes);
    }

    private string GetTimelineStyles()
    {
        var styles = new List<string>();
        if (!string.IsNullOrEmpty(Style))
        {
            styles.Add(Style);
        }
        return string.Join("; ", styles);
    }
}

@code {
    public class TimelineItem
    {
        public string Title { get; set; } = string.Empty;
        public string? Description { get; set; }
        public DateTime? Timestamp { get; set; }
    }
}

