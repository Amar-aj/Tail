@inherits TailComponentBase
@using Microsoft.AspNetCore.Components.Web
@using Tail.Blazor.DataGrid
@typeparam T

<div class="@GetDataGridClasses()" style="@GetDataGridStyles()">
    <table class="min-w-full divide-y divide-gray-200">
        <thead class="bg-gray-50" style="background-color: var(--color-surface-secondary, #f9fafb);">
            <tr>
                @foreach (var column in Columns)
                {
                    <th class="px-6 py-3 text-left text-xs font-medium uppercase tracking-wider" style="color: var(--color-text-secondary, #6b7280);">
                        @column.Header
                    </th>
                }
            </tr>
        </thead>
        <tbody class="bg-white divide-y divide-gray-200" style="background-color: var(--color-surface, white);">
            @foreach (var item in Data)
            {
                <tr class="hover:bg-gray-50">
                    @foreach (var column in Columns)
                    {
                        <td class="px-6 py-4 whitespace-nowrap text-sm" style="color: var(--color-text-primary, black);">
                            @column.Render(item)
                        </td>
                    }
                </tr>
            }
        </tbody>
    </table>
</div>

@code {
    [Parameter] public List<T> Data { get; set; } = new();
    [Parameter] public List<DataGridColumn<T>> Columns { get; set; } = new();
    [Parameter] public string? Style { get; set; }

    private string GetDataGridClasses()
    {
        var classes = new List<string> { "overflow-x-auto", "rounded-lg", "border", "border-gray-200" };
        if (!string.IsNullOrEmpty(Class))
        {
            classes.Add(Class);
        }
        return string.Join(" ", classes);
    }

    private string GetDataGridStyles()
    {
        var styles = new List<string>();
        styles.Add($"border-color: var(--color-border, #e5e7eb)");
        if (!string.IsNullOrEmpty(Style))
        {
            styles.Add(Style);
        }
        return string.Join("; ", styles);
    }
}

@code {
    public class DataGridColumn<T>
    {
        public string Header { get; set; } = string.Empty;
        public RenderFragment<T>? Render { get; set; }
    }
}

