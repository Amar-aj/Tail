@using Microsoft.AspNetCore.Components

@code {
    [CascadingParameter] private TailTabs? Parent { get; set; }
    
    [Parameter] public string? Title { get; set; }
    [Parameter] public string? Label { get; set; }
    [Parameter] public RenderFragment? Icon { get; set; }
    [Parameter] public bool Disabled { get; set; }
    [Parameter] public string? Badge { get; set; }
    [Parameter] public int? Count { get; set; }
    
    protected override void OnInitialized()
    {
        if (Parent == null)
        {
            throw new InvalidOperationException("TailTabItem must be a child of TailTabs");
        }
        
        var tabItem = new TailTabs.TabItem
        {
            Label = Title ?? Label ?? string.Empty,
            Icon = Icon,
            Disabled = Disabled,
            Badge = Badge,
            Count = Count
        };
        
        Parent.AddTab(tabItem);
    }
}
