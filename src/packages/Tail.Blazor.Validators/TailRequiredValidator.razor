@inherits Tail.Blazor.Core.TailComponentBase
@namespace Tail.Blazor.Validators
@using System.ComponentModel.DataAnnotations

@if (ShowError)
{
    <span class="text-sm text-red-600 dark:text-red-400">@ErrorMessage</span>
}

@code {
    [Parameter] public object? Value { get; set; }
    [Parameter] public string? ErrorMessage { get; set; }
    [Parameter] public bool Required { get; set; } = true;

    private bool ShowError => Required && IsInvalid;
    private bool IsInvalid => Value == null || 
                             (Value is string str && string.IsNullOrWhiteSpace(str)) ||
                             (Value is int intVal && intVal == 0);

    protected override void OnParametersSet()
    {
        if (string.IsNullOrEmpty(ErrorMessage))
        {
            ErrorMessage = "This field is required.";
        }
    }
}

