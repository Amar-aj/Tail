@inherits Tail.Blazor.Core.TailComponentBase
@namespace Tail.Blazor.Validators

@if (ShowError)
{
    <span class="text-sm text-red-600 dark:text-red-400">@ErrorMessage</span>
}

@code {
    [Parameter] public object? Value { get; set; }
    [Parameter] public Func<object?, bool>? ValidationFunction { get; set; }
    [Parameter] public string? ErrorMessage { get; set; }

    private bool ShowError => ValidationFunction != null && !IsValid;
    private bool IsValid => ValidationFunction == null || ValidationFunction(Value);

    protected override void OnParametersSet()
    {
        if (string.IsNullOrEmpty(ErrorMessage))
        {
            ErrorMessage = "Validation failed.";
        }
    }
}

