@inherits Tail.Blazor.Core.TailComponentBase
@namespace Tail.Blazor.Layout

<div class="@GetCardClasses()" style="@GetCardStyle()" @attributes="AdditionalAttributes">
    @if (!string.IsNullOrEmpty(Header))
    {
        <div class="px-6 py-4" style="border-bottom: 1px solid var(--color-border)">
            <h3 class="text-lg font-semibold" style="color: var(--color-text-primary)">@Header</h3>
        </div>
    }
    @if (HeaderContent != null)
    {
        <div class="px-6 py-4" style="border-bottom: 1px solid var(--color-border)">
            @HeaderContent
        </div>
    }
    <div class="@GetBodyClasses()">
        @ChildContent
    </div>
    @if (!string.IsNullOrEmpty(Footer))
    {
        <div class="px-6 py-4" style="border-top: 1px solid var(--color-border); background-color: color-mix(in srgb, var(--color-border) 20%, var(--color-surface))">
            @Footer
        </div>
    }
    @if (FooterContent != null)
    {
        <div class="px-6 py-4" style="border-top: 1px solid var(--color-border); background-color: color-mix(in srgb, var(--color-border) 20%, var(--color-surface))">
            @FooterContent
        </div>
    }
</div>

@code {
    [Parameter] public RenderFragment? ChildContent { get; set; }
    [Parameter] public RenderFragment? HeaderContent { get; set; }
    [Parameter] public RenderFragment? FooterContent { get; set; }
    [Parameter] public string? Header { get; set; }
    [Parameter] public string? Footer { get; set; }
    [Parameter] public bool Shadow { get; set; } = true;
    [Parameter] public bool Rounded { get; set; } = true;
    [Parameter] public bool Bordered { get; set; } = true;
    [Parameter] public bool Hoverable { get; set; } = false;
    [Parameter] public string? BodyClass { get; set; }

    private string GetCardClasses()
    {
        var classes = new List<string> { "overflow-hidden transition-all duration-200" };
        
        if (Rounded)
        {
            classes.Add("rounded-lg");
        }
        
        if (Shadow)
        {
            classes.Add("shadow-md");
        }
        
        if (Hoverable)
        {
            classes.Add("hover:shadow-lg cursor-pointer");
        }
        
        if (!string.IsNullOrEmpty(CssClass))
        {
            classes.Add(CssClass);
        }
        
        return string.Join(" ", classes);
    }

    private string GetCardStyle()
    {
        var styles = new List<string>
        {
            "background-color: var(--color-surface)"
        };
        
        if (Bordered)
        {
            styles.Add("border: 1px solid var(--color-border)");
        }
        
        return string.Join("; ", styles);
    }

    private string GetBodyClasses()
    {
        var classes = new List<string> { "px-6 py-4" };
        
        if (!string.IsNullOrEmpty(BodyClass))
        {
            classes.Add(BodyClass);
        }
        
        return string.Join(" ", classes);
    }
}


