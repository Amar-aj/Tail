@inherits Tail.Blazor.Core.TailComponentBase
@namespace Tail.Blazor.Feedback

<div class="@GetContainerClasses()" aria-live="polite" aria-atomic="true" @attributes="AdditionalAttributes">
    <div class="w-full flex flex-col items-center space-y-4 sm:items-end">
        @ChildContent
    </div>
</div>

@code {
    [Parameter] public RenderFragment? ChildContent { get; set; }
    [Parameter] public ToastPosition Position { get; set; } = ToastPosition.TopRight;

    private string GetContainerClasses()
    {
        var classes = new List<string> { "fixed z-50 pointer-events-none" };
        
        classes.Add(Position switch
        {
            ToastPosition.TopLeft => "top-0 left-0 p-4",
            ToastPosition.TopRight => "top-0 right-0 p-4",
            ToastPosition.TopCenter => "top-0 left-1/2 transform -translate-x-1/2 p-4",
            ToastPosition.BottomLeft => "bottom-0 left-0 p-4",
            ToastPosition.BottomRight => "bottom-0 right-0 p-4",
            ToastPosition.BottomCenter => "bottom-0 left-1/2 transform -translate-x-1/2 p-4",
            _ => "top-0 right-0 p-4"
        });
        
        if (!string.IsNullOrEmpty(CssClass))
        {
            classes.Add(CssClass);
        }
        
        return string.Join(" ", classes);
    }
}

public enum ToastPosition
{
    TopLeft,
    TopRight,
    TopCenter,
    BottomLeft,
    BottomRight,
    BottomCenter
}

