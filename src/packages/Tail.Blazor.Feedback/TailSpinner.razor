@inherits Tail.Blazor.Core.TailComponentBase
@namespace Tail.Blazor.Feedback

<div class="@GetSpinnerClasses()" role="status" aria-label="Loading" @attributes="AdditionalAttributes">
    <svg class="animate-spin" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
        <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
        <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
    </svg>
    @if (!string.IsNullOrEmpty(Text))
    {
        <span class="ml-2">@Text</span>
    }
</div>

@code {
    [Parameter] public string? Text { get; set; }
    [Parameter] public SpinnerSize Size { get; set; } = SpinnerSize.Md;
    [Parameter] public SpinnerColor Color { get; set; } = SpinnerColor.Primary;

    private string GetSpinnerClasses()
    {
        var classes = new List<string> { "inline-flex items-center" };
        
        // Size
        classes.Add(Size switch
        {
            SpinnerSize.Sm => "h-4 w-4",
            SpinnerSize.Md => "h-6 w-6",
            SpinnerSize.Lg => "h-8 w-8",
            SpinnerSize.Xl => "h-12 w-12",
            _ => "h-6 w-6"
        });
        
        // Color
        classes.Add(Color switch
        {
            SpinnerColor.Primary => "text-blue-600",
            SpinnerColor.Success => "text-green-600",
            SpinnerColor.Warning => "text-yellow-600",
            SpinnerColor.Danger => "text-red-600",
            SpinnerColor.White => "text-white",
            SpinnerColor.Gray => "text-gray-600",
            _ => "text-blue-600"
        });
        
        if (!string.IsNullOrEmpty(CssClass))
        {
            classes.Add(CssClass);
        }
        
        return string.Join(" ", classes);
    }
}

public enum SpinnerSize
{
    Sm,
    Md,
    Lg,
    Xl
}

public enum SpinnerColor
{
    Primary,
    Success,
    Warning,
    Danger,
    White,
    Gray
}

