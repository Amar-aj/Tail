@inherits Tail.Blazor.Core.TailComponentBase
@namespace Tail.Blazor.Feedback

<div class="@GetContainerClasses()" style="@GetContainerStyle()">
    @if (!string.IsNullOrEmpty(Icon))
    {
        <div class="@GetIconContainerClasses()" style="@GetIconContainerStyle()">
            <span class="@GetIconClasses()">@Icon</span>
        </div>
    }
    else if (IconTemplate != null)
    {
        <div class="@GetIconContainerClasses()" style="@GetIconContainerStyle()">
            @IconTemplate
        </div>
    }
    
    @if (!string.IsNullOrEmpty(Title))
    {
        <h3 class="@GetTitleClasses()">@Title</h3>
    }
    
    @if (!string.IsNullOrEmpty(Description))
    {
        <p class="@GetDescriptionClasses()">@Description</p>
    }
    
    @if (DescriptionTemplate != null)
    {
        <div class="@GetDescriptionClasses()">
            @DescriptionTemplate
        </div>
    }
    
    @if (ActionTemplate != null)
    {
        <div class="@GetActionsClasses()">
            @ActionTemplate
        </div>
    }
</div>

@code {
    [Parameter] public RenderFragment? IconTemplate { get; set; }
    [Parameter] public RenderFragment? DescriptionTemplate { get; set; }
    [Parameter] public RenderFragment? ActionTemplate { get; set; }
    [Parameter] public string? Icon { get; set; }
    [Parameter] public string? Title { get; set; }
    [Parameter] public string? Description { get; set; }
    [Parameter] public EmptyStateSize Size { get; set; } = EmptyStateSize.Md;
    [Parameter] public EmptyStateVariant Variant { get; set; } = EmptyStateVariant.Default;

    // Styling methods using global CSS variables
    private string GetContainerClasses()
    {
        var classes = new List<string> { "flex flex-col items-center justify-center text-center py-12 px-4" };
        
        classes.Add(Size switch
        {
            EmptyStateSize.Sm => "py-8",
            EmptyStateSize.Md => "py-12",
            EmptyStateSize.Lg => "py-16",
            _ => "py-12"
        });
        
        if (!string.IsNullOrEmpty(CssClass))
        {
            classes.Add(CssClass);
        }
        
        return string.Join(" ", classes);
    }

    private string GetContainerStyle()
    {
        return string.Empty;
    }

    private string GetIconContainerClasses()
    {
        var classes = new List<string> { "mb-4" };
        
        classes.Add(Size switch
        {
            EmptyStateSize.Sm => "w-16 h-16",
            EmptyStateSize.Md => "w-20 h-20",
            EmptyStateSize.Lg => "w-24 h-24",
            _ => "w-20 h-20"
        });
        
        return string.Join(" ", classes);
    }

    private string GetIconContainerStyle()
    {
        return @"
            background-color: var(--color-surface-2);
            border-radius: var(--radius-lg);
            display: flex;
            align-items: center;
            justify-content: center;
        ";
    }

    private string GetIconClasses()
    {
        return Size switch
        {
            EmptyStateSize.Sm => "text-3xl",
            EmptyStateSize.Md => "text-4xl",
            EmptyStateSize.Lg => "text-5xl",
            _ => "text-4xl"
        };
    }

    private string GetTitleClasses()
    {
        var classes = new List<string> { "font-semibold mb-2" };
        
        classes.Add(Size switch
        {
            EmptyStateSize.Sm => "text-lg",
            EmptyStateSize.Md => "text-xl",
            EmptyStateSize.Lg => "text-2xl",
            _ => "text-xl"
        });
        
        return string.Join(" ", classes);
    }

    private string GetDescriptionClasses()
    {
        var classes = new List<string> { "max-w-md mb-6" };
        
        classes.Add(Size switch
        {
            EmptyStateSize.Sm => "text-sm",
            EmptyStateSize.Md => "text-base",
            EmptyStateSize.Lg => "text-lg",
            _ => "text-base"
        });
        
        return string.Join(" ", classes);
    }

    private string GetActionsClasses()
    {
        return "flex items-center gap-2";
    }
}


